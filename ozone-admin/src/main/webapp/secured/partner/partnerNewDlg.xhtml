<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
	
<ui:composition>
	<h:form id="newPartnerForm">
	    
	    <!-- New Partner Dialog -->
       	<p:dialog header="#{msg['partner.new']}" 
		   		widgetVar="newPartnerDialog" 
		   		resizable="false"
				modal="true" 
	           	width="600" 
	           	style="position:fixed; top:0%; left:0%;"> 
	           	       
	              
		<h:panelGrid id="newPartnerPanel" columns="2" cellpadding="2" style="margin:0 auto;" border="0">	 
        	<p:fieldset legend="Partner Data" style="width:400px;" >
              	<h:panelGrid columns="3" cellpadding="2" style="margin:0 auto;" border="0">
              	
              	<h:outputLabel for="nName" value="#{msg['partner.name']} *"/>             
	            <p:inputText id="nName" style="width:250px;"
	            			required="true"
	               			label="#{msg['partner.partnerName']}"
					        binding="#{partnerController.newName}">
					       	<p:ajax event="blur" update="nNameMsg"/> 
				</p:inputText> 
                <p:message id="nNameMsg" for="nName" display="icon"/>
                
                <h:outputLabel  for="nCategory" value="#{msg['partner.category']} *"/>	
		        <p:selectOneMenu id="nCategory"
					        	required="true"
					        	style="width:200px;"
					        	label="#{msg['partner.category']}"
					        	binding="#{partnerController.newCategory}">  
		        		<f:selectItem itemLabel="--" itemValue=""  />
         				<f:selectItems value="#{partnerController.categoryItems}"/> 
         				<p:ajax event="blur" update="nCategoryMsg"/> 
		        </p:selectOneMenu>
                <p:message id="nCategoryMsg" for="nCategory" display="icon"/>
                
                
                <h:outputLabel for="ncity" value="#{msg['partner.city']} *"/>				                
			    <p:selectOneMenu id="ncity"
		        				required="true"
		        				label="#{msg['partner.city']}"
		        				binding="#{partnerController.newCity}">
		            <f:selectItem itemLabel="--" itemValue="" />
		            <f:selectItems value="#{partnerController.allCityItems}" /> 
		            <p:ajax event="blur" update="ncityMsg"/>    
		        </p:selectOneMenu>				    
	        	<p:message id="ncityMsg" for="ncity" display="icon"/>  
	        	
                <h:outputLabel for="naddress" value="#{msg['partner.address']} *"/>        
				<p:inputTextarea id="naddress" style="width:250px;height:80px;"
	                			required="true"
				                maxlength="200"
				                resisable="false"
                				label="#{msg['partner.address']}"
                				binding="#{partnerController.newAddress}">
                				<p:ajax event="blur" update="naddressMsg"/>    
                </p:inputTextarea> 	                				
				<p:message id="naddressMsg" for="naddress" display="icon"/>      
				
				<h:outputLabel for="ntel" value="#{msg['partner.tel']}"/>                
                <p:inputText id="ntel"
			               	binding="#{partnerController.newTel}">
			               	<p:ajax event="blur" update="ntelMsg" display="icon"/> 
			    </p:inputText>
	            <p:message id="ntelMsg" for="ntel" />  
                
                <h:outputLabel for="ncel" value="#{msg['partner.cel']} *"/>                
                <p:inputText id="ncel" 
			                required="true"
	                        label="#{msg['partner.cel']}"
		                    binding="#{partnerController.newCel}">
		                    <p:ajax event="blur" update="ncelMsg"/>  
		        </p:inputText>
				<p:message id="ncelMsg" for="ncel" display="icon"/>  
				
                <h:outputLabel for="nemail" value="#{msg['partner.email']}"/>                
	            <p:inputText id="nemail" binding="#{partnerController.newEmail}" style="width:250px;">
	            	<f:validator validatorId="emailValidator" />
	            	<p:ajax event="blur" update="nemailMsg"/>  
	            </p:inputText>
				<p:message id="nemailMsg" for="nemail" display="icon"/>
				
				<h:outputLabel for="nPwd" value="Fjalekalimi"/>                
	            <p:inputText id="nPwd" binding="#{partnerController.newPwd}" style="width:250px;"/>
				<p:message id="nPwdMsg" for="nPwd" display="icon"/>
                
                <h:outputLabel for="nWebsite" value="#{msg['partner.website']}" />                
	            <p:inputText id="nWebsite" binding="#{partnerController.newWebsite}" style="width:250px;">
	            	<p:ajax event="blur" update="nWebsiteMsg"/>  
	            </p:inputText>
				<p:message id="nWebsiteMsg" for="nWebsite" display="icon"/>
                 
                </h:panelGrid>
                </p:fieldset>
                
                <f:facet name="footer">
					<h:panelGroup>
						<center>	
						<p:commandButton update="form:partnersListPanel,form:message,newPartnerForm:newPartnerPanel" 
									value="#{msg['partner.buttonAdd']}"
									oncomplete="handleCallbackRequest(xhr, status, args)"
									actionListener="#{partnerController.addPartner}"/>
    					<p:commandButton value="#{msg['buttonClose']}" onclick="newPartnerDialog.hide()" type="button" icon="ui-icon ui-icon-close"/>  
						</center>
					</h:panelGroup>
                </f:facet>

           	</h:panelGrid>
   		</p:dialog>
   		
   		<script type="text/javascript">  
		    function handleCallbackRequest(xhr, status, args) { 
		        if(!args.validationFailed) {  
		        	newPartnerDialog.hide();
		        }
		    }  
		</script> 
	</h:form>   		
</ui:composition>    	

</html>
	
	