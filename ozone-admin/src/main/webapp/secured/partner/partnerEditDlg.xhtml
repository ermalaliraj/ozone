<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<ui:composition >    	

	<p:dialog header="#{msg['partner.detail']}" 
			   		widgetVar="updatePartnerDialog" 
			   		resizable="false"
					modal="true" 
		           	width="600" 
		           	style="position:fixed; top:0%; left:0%;">  
	           	
		<h:panelGrid id="updatePartnerPanel" columns="3" cellpadding="2" style="margin:0 auto;" border="0"> 
	    	<p:fieldset legend="Partner Data">
		    	<h:panelGrid columns="3" cellpadding="2" style="margin:0 auto;">  
					<h:outputLabel for="fName" value="#{msg['partner.name']} *"/>             
				 	<h:panelGroup>  
			             <p:inputText required="true" id="fName"
			             			style="width:250px;"
			             			rendered="#{partnerController.editMode}" 
									value="#{partnerController.partnerSelected.name}"
									label="#{msg['partner.partnerName']}"
							        binding="#{partnerController.fName}">
								<p:ajax event="blur" update="fNameMsg" />
						</p:inputText> 
						<h:outputText rendered="#{!partnerController.editMode}" 
									value="#{partnerController.partnerSelected.name}"/>
					</h:panelGroup>
			        <p:message id="fNameMsg" for="fName" display="icon"/>  
			        
			        <h:outputLabel value="#{msg['partner.category']}"/>
			        <h:panelGroup>
			        <p:selectOneMenu id="fCategory"
			        	rendered="#{partnerController.editMode}" 
			        	value="#{partnerController.partnerSelected.category.id}"
			        	binding="#{partnerController.fCategory}">
			        	<f:selectItem itemLabel="--" itemValue=""  />
          				<f:selectItems value="#{partnerController.categoryItems}"/>
          				<p:ajax event="blur" update="fCategoryMsg" />
			        </p:selectOneMenu>
			        	<h:outputText rendered="#{!partnerController.editMode}"
			        		value="#{partnerController.partnerSelected.category.id}"/>
			        </h:panelGroup>
			        <p:message id="fCategoryMsg" for="fCategory" display="icon"/>
			        
					<h:outputLabel for="fcity" value="#{msg['partner.city']}"/>				                
			      	<h:panelGroup>
			       		<p:selectOneMenu id="fcity"
			       				rendered="#{partnerController.editMode}" 
			       				value="#{partnerController.partnerSelected.city.id}"  
			       				binding="#{partnerController.fCity}">
			           		<f:selectItem itemLabel="--" itemValue="" />
			           		<f:selectItems value="#{partnerController.allCityItems}" />
			           		<p:ajax event="blur" update="fcityMsg" />   
			       		</p:selectOneMenu>
			       		<h:outputText rendered="#{!partnerController.editMode}" 
								value="#{partnerController.partnerSelected.city.name}"/>
			      	</h:panelGroup>
			     	<p:message id="fcityMsg" for="fcity" display="icon"/>  
			     	
			        <h:outputLabel for="faddress" value="#{msg['partner.address']} *"/>        
			        <h:panelGroup>
			        	<p:inputTextarea id="faddress" style="width:250px;height:80px;"
			             			required="true"
			                		maxlength="200"
			                		resisable="false"
			             			rendered="#{partnerController.editMode}" 
			           				value="#{partnerController.partnerSelected.address}" 
			           				label="#{msg['partner.address']}"
			           				binding="#{partnerController.fAddress}">
			           			<p:ajax event="blur" update="faddressMsg" />   
			            </p:inputTextarea>   	                				
			        	<h:outputText rendered="#{!partnerController.editMode}" 
								value="#{partnerController.partnerSelected.address}"/>
					</h:panelGroup>
					<p:message id="faddressMsg" for="faddress" display="icon"/>      
			
					<h:outputLabel for="ftel" value="#{msg['partner.tel']}"/>                
			        <h:panelGroup>
			        	<p:inputText id="ftel"
			        			 rendered="#{partnerController.editMode}" 
			                     value="#{partnerController.partnerSelected.tel}"                             
			                     binding="#{partnerController.fTel}">
			                     <p:ajax event="blur" update="ftelMsg" />   
			            </p:inputText>         
			            <h:outputText rendered="#{!partnerController.editMode}" 
								value="#{partnerController.partnerSelected.tel}"/>
			        </h:panelGroup>
			        <p:message id="ftelMsg" for="ftel" display="icon"/>  
			            
			        <h:outputLabel for="fcel" value="#{msg['partner.cel']} *"/>                
			        <h:panelGroup>
			        	<p:inputText required="true" id="fcel"
								rendered="#{partnerController.editMode}" 
						        value="#{partnerController.partnerSelected.cel}"
						        label="#{msg['partner.cel']}"
						        binding="#{partnerController.fCel}">
						        <p:ajax event="blur" update="fcelMsg" />  
						</p:inputText>
			 			<h:outputText rendered="#{!partnerController.editMode}" 
								value="#{partnerController.partnerSelected.cel}"/>
					</h:panelGroup>
					<p:message id="fcelMsg" for="fcel" display="icon"/>  
			
			        <h:outputLabel for="femail" value="#{msg['partner.email']}"/>                
			        <h:panelGroup>
			        	<p:inputText id="femail"
			             			style="width:250px;"
			             			rendered="#{partnerController.editMode}" 
			                        value="#{partnerController.partnerSelected.email}"
			                        binding="#{partnerController.fEmail}">
			                        <f:validator validatorId="emailValidator" />
			                      	<p:ajax event="blur" update="femailMsg" />  
			            </p:inputText>            
			            <h:outputText rendered="#{!partnerController.editMode}" 
									value="#{partnerController.partnerSelected.email}"/>
			        </h:panelGroup>
					<p:message id="femailMsg" for="femail" display="icon"/>  
					
					<h:outputLabel for="fPwd" value="Fjalekalimi"/>                
		            <p:inputText id="fPwd" style="width:250px;" rendered="#{partnerController.editMode}" 
		            	value="#{partnerController.partnerSelected.password}"
		            	binding="#{partnerController.fPwd}" />
					<p:message id="fPwdMsg" for="fPwd" display="icon"/>
					
					 <h:outputLabel for="fWebsite" value="#{msg['partner.website']}"/>                
			        <h:panelGroup>
			        	<p:inputText id="fWebsite"
			             			style="width:250px;"
			             			rendered="#{partnerController.editMode}" 
			                        value="#{partnerController.partnerSelected.webSite}"
			                        binding="#{partnerController.fWebsite}">
			                        <p:ajax event="blur" update="fWebsiteMsg" />  
			            </p:inputText>         
			            <h:outputText rendered="#{!partnerController.editMode}" 
									value="#{partnerController.partnerSelected.webSite}"/>
			        </h:panelGroup>
					<p:message id="fWebsiteMsg" for="fWebsite" display="icon"/>   
				</h:panelGrid>
			</p:fieldset>
				
	        <f:facet name="footer">
				<h:panelGroup>
					<center>	
					<p:commandButton update="partnersListPanel,message" 
								value="#{msg['buttonPrint']}"
								oncomplete="updatePartnerDialog.hide()"
								rendered="#{!partnerController.editMode}"/>
					
					<p:commandButton update="partnersListPanel,message"			
								value="#{msg['partner.buttonUpdate']}" 
								oncomplete="handleUpdatePartnerCallback(xhr, status, args)"
								actionListener="#{partnerController.updatePartner}"
								icon="ui-icon ui-icon-check"										 
								rendered="#{partnerController.editMode}" />
			
					<p:commandButton value="#{msg['buttonClose']}" onclick="updatePartnerDialog.hide()" type="button" icon="ui-icon ui-icon-close"/>  
					</center>
				</h:panelGroup>
			</f:facet>
		</h:panelGrid>
	</p:dialog>

   	<script type="text/javascript">  
	    function handleUpdatePartnerCallback(xhr, status, args) { 
	        if(!args.validationFailed) {  
	        	updatePartnerDialog.hide();
	        }
	    }  
	</script> 
</ui:composition>
</html>