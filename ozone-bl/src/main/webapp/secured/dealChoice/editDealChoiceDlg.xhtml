<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
	
<ui:composition >    
	<h:form id="editDealChoiceForm"> 
	<p:dialog header="Edit - Deal Choice" 
				   		widgetVar="editDealChoiceDialog" 
				   		resizable="false"
						modal="true" 
			           	width="500" 
			           	style="position:fixed; top:0%; left:0%;">
		<p:panel>
		<h:panelGrid id="editDealChoicePanel" columns="1" cellpadding="2" style="width:100%" border="0" styleClass="nowrapColumn"> 
				
			<p:fieldset legend="Te dhenat" style="width:400px;">
				<h:panelGrid columns="3" cellpadding="2" style="margin:0 auto;" border="0">  
					<h:outputLabel for="fChoiceNr" value="Zgjedhja Nr. *"/>   
	          		<p:inputText id="fChoiceNr" size="7"
							label="Zgjedhja Nr."
							disabled="true"
							rendered="#{dealWizController.editModeDC}"
							value="#{dealWizController.dealChoiceSelected.choiceNr}">
					    <f:convertNumber/>
						<p:ajax event="blur" update="fChoiceNrMsg" /> 
					</p:inputText>
	          		<p:message id="fChoiceNrMsg" for="fChoiceNr" display="icon"/>
					
					<h:outputLabel for="fDealChoiceTitle" value="Titulli i zgjedhjes *"/>   
					<p:inputTextarea id="fDealChoiceTitle" style="width:250px;height:30px;"
							rendered="#{dealWizController.editModeDC}"
							maxLength="100"	
							resisable="false"
							maxHeight="30"
							binding="#{dealWizController.fDealChoiceTitle}"
							value="#{dealWizController.dealChoiceSelected.choiceTitle}"> 
						<p:ajax event="blur" update="fDealChoiceTitleMsg" /> 
					</p:inputTextarea>
	          		<p:message id="fDealChoiceTitleMsg" for="fDealChoiceTitle" display="icon"/>

					<h:outputLabel for="fFullPrice" value="#{msg['deal.fullPrice']} *"/>   
	          		<p:inputText id="fFullPrice" size="7"
							label="#{msg['deal.fullPrice']}"
							rendered="#{dealWizController.editModeDC}"
							value="#{dealWizController.dealChoiceSelected.fullPrice}"
					        binding="#{dealWizController.fFullPrice}">
					    <f:convertNumber/>
						<p:ajax event="blur" update="fFullPriceMsg" /> 
					</p:inputText>
	          		<p:message id="fFullPriceMsg" for="fFullPrice" display="icon"/>
	          		
	          		<h:outputLabel for="fPrice" value="#{msg['deal.price']} *"/>   
	          		<p:inputText id="fPrice" size="7" 
							label="#{msg['deal.price']}"
							rendered="#{dealWizController.editModeDC}"
							value="#{dealWizController.dealChoiceSelected.price}"
					        binding="#{dealWizController.fPrice}">
					    <f:convertNumber/>
						<p:ajax event="blur" update="fPriceMsg" /> 
					</p:inputText> 
	          		<p:message id="fPriceMsg" for="fPrice" display="icon"/>
	          		
	          		<h:outputLabel for="fCommission" value="Komision per OZone *"/>   
	          		<h:panelGroup>
		          		<p:inputText id="fCommission"
		          				required="true"
		          				rendered="#{dealWizController.editModeDC}"
								label="Komision per OZone"
								value="#{dealWizController.dealChoiceSelected.commission}"
						        binding="#{dealWizController.fCommission}">
						    <f:convertNumber pattern="#0.0"/>
							<p:ajax event="blur" update="fCommissionMsg" /> 
						</p:inputText>
						(example: 27.5)
						% 
					</h:panelGroup>
	          		<p:message id="fCommissionMsg" for="fCommission" display="icon"/>

	          		<h:outputLabel for="fMinCustomers" value="#{msg['deal.minCustomers']} *"/>   
	          		<p:inputText id="fMinCustomers" size="4"
							label="#{msg['deal.minCustomers']}"
							rendered="#{dealWizController.editModeDC}"
							value="#{dealWizController.dealChoiceSelected.minCustomers}"
					        binding="#{dealWizController.fMinCustomers}">
					    <f:convertNumber/>
						<p:ajax event="blur" update="fMinCustomersMsg" /> 
					</p:inputText>
	          		<p:message id="fMinCustomersMsg" for="fMinCustomers" display="icon"/>

	          		<h:outputLabel for="fMaxCustomers" value="#{msg['deal.maxCustomers']} *"/>   
	          		<p:inputText id="fMaxCustomers" size="4" 
							label="#{msg['deal.maxCustomers']}"
							rendered="#{dealWizController.editModeDC}"
							value="#{dealWizController.dealChoiceSelected.maxCustomers}"
					        binding="#{dealWizController.fMaxCustomers}">
					    <f:convertNumber/>
						<p:ajax event="blur" update="fMaxCustomersMsg" /> 
					</p:inputText>
	          		<p:message id="fMaxCustomersMsg" for="fMaxCustomers" display="icon" />
					
				</h:panelGrid>
			</p:fieldset>
		</h:panelGrid>
				
		<f:facet name="footer">
			<h:panelGroup>
				<center>	
				<p:commandButton value="Azhorno Zgjedhjen"  
								update="editDealChoicePanel,dealForm:dealChoicesTable,dealForm:dataMessage2" 
								actionListener="#{dealWizController.updateDealChoice}"
								oncomplete="handleEditDealChoiceCBR(xhr, status, args)"
								icon="ui-icon ui-icon-newwin"> 					
				</p:commandButton>   
				<p:commandButton value="#{msg['buttonClose']}" onclick="editDealChoiceDialog.hide()" type="button" icon="ui-icon ui-icon-close"/>  
				</center>
			</h:panelGroup>
		</f:facet>
		
		</p:panel>
	</p:dialog>
		
	<script type="text/javascript">  
	    function handleEditDealChoiceCBR(xhr, status, args) { 
	        if(!args.validationFailed) {  
	        	editDealChoiceDialog.hide();
	        }
	    }  
	</script> 
	
	</h:form>
</ui:composition>
</html>

